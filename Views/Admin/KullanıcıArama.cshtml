
@{
    ViewBag.Title = "KullanıcıArama";
    Layout = "~/Views/Admin/Layout/_Layout.cshtml";
}

<center>
    <br />
    <h2>Kullanıcı Listesi</h2>
    <br />
</center>

<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header border-0">
                <center>
                    Kullanıcılar
                </center>
                
            </div>
            <div class="table-responsive">
                <table class="table align-items-center table-flush">
                    <thead>

                        <tr>

                            <th>Kullanıcı Adı</th>
                            <th>Şifre</th>
                            <th>Sepeti Görüntüle</th>
                            <th>Kullanıcıyı Sil</th>

                        </tr>
                    </thead>

                    <tbody>

                        @foreach (tst_MVC1.Models.tstTable item in ViewBag.KullanıcıList)
                        {
                            string KullaniciSepet = "KullaniciSepet" + item.userName;

                            <tr>


                                <td>@item.userName</td>
                                <td>@item.password</td>

                                <td><a href="/Kullanici/KullanıcıSepet/@item.userName" data-toggle="modal" data-target="#@KullaniciSepet" class="btn btn-outline-info btn-sm text-white"><i class="icon-basket"></i> Sepet</a></td>

                                <td><a href="/Kullanici/KullanıcıSil/@item.id" class="btn btn-outline-danger btn-sm text-white"><i class="icon-trash"></i> Sil</a></td>

                                <td>
                                    <div class="modal fade" id="@KullaniciSepet">
                                        <div class="modal-dialog modal-lg">
                                            <div class="modal-content border-info">
                                                <div class="modal-header bg-info">
                                                    <h5 class="modal-title text-white">Kullanıcının Sepetini Görüntüle</h5>
                                                    <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>

                                                <div class="modal-body" style="background-color:#18191A">
                                                    <br />
                                                    <div class="card" style="background-color:#242526">
                                                        <div class="card-header border-0">
                                                            <center>
                                                                <span class="text-warning">@item.userName</span> Adlı Kullanıcının Sepeti
                                                            </center>
                                                        </div>

                                                        <div class="table-responsive">
                                                            <table class="table align-items-center table-flush">
                                                                <thead>

                                                                    <tr>

                                                                        <th>Ürün Adı</th>
                                                                        <th>Adet</th>
                                                                        <th>Fiyat</th>
                                                                        <th>Ürünü Sil</th>

                                                                    </tr>
                                                                </thead>

                                                                <tbody>
                                                                    @foreach (tst_MVC1.Models.tstYemekSepet1 Sepetitem in ViewBag.KullaniciSepet)
                                                                    {
                                                                        if (Sepetitem.userName == item.userName)
                                                                        {
                                                                            string Sil = "SepetSil" + item.id;

                                                                            <tr>

                                                                                <td>@Sepetitem.YemekAdi</td>
                                                                                <td>@Sepetitem.Adet</td>
                                                                                <td>@Sepetitem.Fiyat ₺</td>

                                                                                <td><a href="/Kullanici/KullanıcıSepetSil/@Sepetitem.id" class="btn btn-outline-danger btn-sm text-white"><i class="icon-trash"></i> Sil</a></td>

                                                                            </tr>
                                                                        }
                                                                    }

                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>

                        }

                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>